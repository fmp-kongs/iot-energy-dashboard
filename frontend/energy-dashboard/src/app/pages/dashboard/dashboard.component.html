<div class="p-4 bg-gray-100 min-h-screen">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-2xl font-bold mb-6 text-gray-800">Device001 - Live Power Consumption</h2>
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Chart Container -->
      <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-sm">
        <div style="height: 400px;">
          <canvas #chartCanvas></canvas>
        </div>
        
        <!-- Status -->
        <div class="mt-4 text-center text-gray-600">
          <p *ngIf="telemetryData.length === 0" class="flex items-center justify-center">
            <span class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"></span>
            Waiting for live data...
          </p>
          <p *ngIf="telemetryData.length > 0">
            ðŸ“Š {{ telemetryData.length }} live data points â€¢ 
            <span [class]="isSignalRConnected ? 'text-green-600' : 'text-red-600'">
              {{ isSignalRConnected ? 'ðŸŸ¢ Connected' : 'ðŸ”´ Disconnected' }}
            </span>
          </p>
        </div>
      </div>

      <!-- Alerts Panel -->
      <div class="bg-white p-6 rounded-lg shadow-sm">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">ðŸš¨ Anomaly Alerts</h3>
          <button 
            *ngIf="currentAlerts.length > 0"
            (click)="clearAlerts()"
            class="text-sm bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded transition-colors">
            Clear All
          </button>
        </div>
        
        <div *ngIf="currentAlerts.length === 0" class="text-center text-gray-500 py-8">
          <div class="text-4xl mb-2">âœ…</div>
          <p>No anomalies detected</p>
          <p class="text-sm">System running normally</p>
        </div>
        
        <div *ngIf="currentAlerts.length > 0" class="space-y-3 max-h-80 overflow-y-auto">
          <div 
            *ngFor="let alert of currentAlerts; trackBy: trackAlert" 
            [class]="'alert-card ' + getAlertClass(alert.severity)">
            <div class="flex justify-between items-start mb-2">
              <span class="font-medium text-sm">{{ alert.type }}</span>
              <span class="text-xs opacity-75">{{ formatTime(alert.timestamp) }}</span>
            </div>
            <p class="text-sm mb-2">{{ alert.message }}</p>
            <div class="flex justify-between items-center">
              <span class="device-tag">{{ alert.deviceId }}</span>
              <span [class]="'severity-badge severity-' + alert.severity">{{ alert.severity.toUpperCase() }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>